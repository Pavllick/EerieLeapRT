# Debug
CONFIG_DEBUG=y
CONFIG_NO_OPTIMIZATIONS=y
CONFIG_DEBUG_OPTIMIZATIONS=y
CONFIG_DEBUG_THREAD_INFO=y

# CONFIG_BOOTLOADER_MCUBOOT=y

# PSRAM config for ESP32-S3-DevKitC-1-N8R2 board with 2MB Quad SPI SPRAM
CONFIG_ESP_SPIRAM=y
CONFIG_SPIRAM_MODE_OCT=y
# SPIRAM (PSRAM) and SPI Flash are on the same bus,
# when SPIRAM is operating in Octal mode at 80MHz, due to the bug:
# https://github.com/zephyrproject-rtos/zephyr/issues/87938
# SPI Flash fails to initialize
CONFIG_SPIRAM_SPEED_40M=y
# 8MB
CONFIG_ESP_SPIRAM_SIZE=8388608
# 1MB
CONFIG_ESP_SPIRAM_HEAP_SIZE=1048576

# Not working on stable version v4.1 due to the bug:
# https://github.com/zephyrproject-rtos/zephyr/pull/88073
# But works on main branch with patch.
CONFIG_SPIRAM_RODATA=y
CONFIG_SPIRAM_FETCH_INSTRUCTIONS=y

# Modbus
CONFIG_UART_ESP32_TX_FIFO_THRESH=127
CONFIG_UART_ESP32_RX_FIFO_THRESH=127

# Logging
CONFIG_LOG_BUFFER_SIZE=2048
CONFIG_LOG_PROCESS_THREAD=y
CONFIG_LOG_PROCESS_THREAD_STACK_SIZE=4096

# CONFIG_LOG_BACKEND_FS=y
# CONFIG_LOG_BACKEND_FS_OVERWRITE=y
# CONFIG_LOG_BACKEND_FS_APPEND_TO_NEWEST_FILE=y
# CONFIG_LOG_BACKEND_FS_FILE_PREFIX="log"
# CONFIG_LOG_BACKEND_FS_DIR="/SD:/syslog"
# # 10485760 B = 10 MB
# CONFIG_LOG_BACKEND_FS_FILE_SIZE=10485760
# CONFIG_LOG_BACKEND_FS_FILES_LIMIT=10
# CONFIG_LOG_BACKEND_FS_OUTPUT_TEXT=y
# CONFIG_SDMMC_LOG_LEVEL_OFF=y

# CBF subsystem
CONFIG_CHARACTER_FRAMEBUFFER=y

# CANBus
# CONFIG_CAN_MAX_FILTER=8
CONFIG_CAN_MCP251XFD_INT_THREAD_STACK_SIZE=2048
