<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>JSON Config Editor</title>
    <link rel="stylesheet" href="prism.css" />
    <link rel="stylesheet" href="style.css" />
</head>

<body>
    <div id="message-box-container">
        <div id="message-box"></div>
    </div>

    <div id="page-layout">
        <header>
            <h1>Sensors JSON Configuration Editor</h1>
        </header>

        <main id="main-content">
            <div id="loader">
                <span>Loading config<span id="dots">...</span></span>
            </div>
            <div id="highlighting-wrapper">
                <textarea id="editor" spellcheck="false"
                    oninput="update(this.value); syncScroll(this);"
                    onscroll="syncScroll(this);" onkeydown="checkTab(this, event);"></textarea>
                <pre id="highlighting" aria-hidden="true">
                    <code class="language-json" id="highlighting-content"></code>
                </pre>
            </div>
        </main>

        <footer>
            <button onclick="saveConfig()">Save</button>
        </footer>
    </div>

    <div id="confirm-modal" class="hidden" onclick="confirmSave(false)">
        <div class="modal-content">
            <p>Are you sure you want to save the config?</p>
            <button onclick="confirmSave(true)">Yes</button>
            <button onclick="confirmSave(false)">No</button>
        </div>
    </div>

    <script>
        let dotCount = 0;
        setInterval(() => {
            const dots = document.getElementById("dots");
            dotCount = (dotCount + 1) % 4;
            dots.textContent = '.'.repeat(dotCount);
        }, 400);
    </script>

    <script src="prism.js"></script>
    <script src="editor.js"></script>
</body>

</html>
